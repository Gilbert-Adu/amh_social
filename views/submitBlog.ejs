<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/png" sizes="32x32" href="./images/favicon-32x32.png">
  <link rel="stylesheet" type="text/css" href="/submitBlog.css">
  <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Sofia">
        <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">

        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.2/jquery.min.js"></script>

  <title>Amhara Unity | Submit a blog</title>
  
        <!-- Include Quill.js CSS -->
<link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">


<!-- Include Quill.js JavaScript -->

    </head>
    <body>

      

        <div class="navbar-container">
          <a href="/" style="text-decoration: none; cursor: pointer;"><div class="app-name">Amhara Unity</div></a>
        </div>

        <div class="submit-notif" id="submit-notif">Your blog is submitted</div>
        <div class="error-notif" id="error-notif">You forgot something</div>


        
        <input type="text" required placeholder="What's your blog title?" id="title" name="title" style="width: 100%;height: 4vh;border: 1px solid #ddd; margin-bottom: 2vh;margin-top: 5vh;width: 50vw;"><br><br>

        <section id="editor"></section>
        <button class="submit" id="submit" style="background-color: #007F73; float:right; margin-top: 5vh;border: 1px solid #007F73; color: white;margin-right: 5vw; padding: 1vh 2vw;cursor: pointer;border-radius: 10px;">Submit</button>



        <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>

        <script>
        const quill = new Quill('#editor', {
            theme: 'snow',
            placeholder: 'Write and format your blog here...'

        });

        document.getElementById('submit').addEventListener('click', async () => {
            const content = quill.root.innerHTML;
            const title = document.getElementById('title').value;
            const submitNotif = document.getElementById('submit-notif');
            const errorNotif = document.getElementById('error-notif');

            try {

              if (title != '' && content != '') {
                const response = await fetch('/submit-a-blog/<%= data %>', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ "content":content, "title": title })
                });

                  submitNotif.style.visibility = 'visible';
                }else {
                  errorNotif.style.visibility = 'visible';
                }
                
                //const data = await response.json();
                //console.log('Blog saved:', data);
                //window.location.href = 'view.html';

                
            } catch (err) {
                console.error('Error saving blog:', err);
            }
        });

        </script>

        
        
    </body>
</html>